<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Home - Blog</title>
</head>
<body>
    <div th:replace="header.html"></div>
    <h1>Welcome to the Blog</h1>    
    
    <form action="/" method="get">
        <select name="filter" onchange="this.form.submit()">
            <option value="latest" th:selected="${filter == 'latest'}">Latest</option>
            <option value="oldest" th:selected="${filter == 'oldest'}">Oldest</option>
            <option value="views" th:selected="${filter == 'views'}">Most Views</option>
        </select>
    </form>
            
    

    <div>
        <div th:each="blogPost : ${blogPosts}">
            <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 10px;">
                <h2 th:text="${blogPost.title}"></h2>
                <p>Author: <span th:text="${blogPost.authorName}"></span></p>
                <!-- (Its working) <p>Views: <span th:text="${blogPost.views}"></span></p> -->
                <p th:text="${blogPost.excerpt}"></p>
                <a th:href="@{'/blog/' + ${blogPost.slug}}">Read More</a>
            </div>
        </div>
    
        <div>
            <a th:if="${currentPage > 0}" 
               th:href="${currentPage == 1} ? '/' : '/page/' + (${currentPage - 1})">Previous</a>
            <span>Page <span th:text="${currentPage + 1}"></span> of <span th:text="${totalPages}"></span></span>
            <a th:if="${currentPage + 1 < totalPages}" 
               th:href="'/page/' + (${currentPage + 1})">Next</a>
        </div>
    </div>
    
</body>
</html> 
